# RAG 검색 알고리즘 비교표

이 문서는 RAG 시스템에서 사용 가능한 다양한 검색 알고리즘을 비교합니다. 각 알고리즘의 장단점과 적합한 사용 사례를 제시합니다.

## 알고리즘 비교

| 알고리즘 | 강점 | 약점 | 적합한 사용 사례 | 핵심 파라미터 |
|----------|------|------|-----------------|--------------|
| **top_k** | • 단순하고 빠름<br>• 리소스 사용량 적음<br>• 구현이 간단함 | • 맥락이 부족할 수 있음<br>• 다양성 부족<br>• 의미적 관계를 고려하지 않음 | • 간단한 질의응답<br>• 리소스가 제한된 환경<br>• 높은 쿼리 처리량이 필요한 경우 | `top_k` |
| **threshold** | • 품질 관리 용이<br>• 무관한 결과 필터링<br>• 결과 수를 적응적으로 조절 | • 적절한 임계값 설정이 어려움<br>• 결과가 없을 수도 있음<br>• 다양성 부족 | • 높은 정확도가 필요한 경우<br>• 결과 품질이 중요한 경우<br>• 도메인 특화 응용 | `similarity_threshold`<br>`top_k` |
| **adjacent_chunks** | • 더 넓은 맥락 제공<br>• 문맥 이해 향상<br>• 정보 누락 감소 | • 관련 없는 정보 포함 가능성<br>• 중복 정보 가능성<br>• 리소스 사용량 증가 | • 맥락이 중요한 질문<br>• 페이지 또는 섹션 기반 검색<br>• 학술 자료 검색 | `neighbor_threshold`<br>`top_k` |
| **merged_chunks** | • 자연스러운 문맥 제공<br>• 분절된 정보 연결<br>• 완성된 논리 구조 파악 | • 계산 비용 증가<br>• 병합 로직의 복잡성<br>• 정보의 통합이 항상 의미적이지 않을 수 있음 | • 긴 문서 분석<br>• 논리적 연결이 중요한 텍스트<br>• 학술 논문, 기술 문서 | `merge_threshold`<br>`top_k` |
| **semantic_window** | • 의미적으로 관련된 청크 포함<br>• 동적인 관련 정보 확장<br>• 깊은 맥락 이해 | • 높은 계산 비용<br>• 구현 복잡성<br>• 윈도우 크기 최적화 필요 | • 복잡한 개념 이해가 필요한 질문<br>• 의미적 관계가 중요한 도메인<br>• 다양한 관점이 필요한 경우 | `window_size`<br>`window_threshold`<br>`top_k` |
| **hybrid** | • 키워드 + 의미적 검색 결합<br>• 밸런스된 검색 결과<br>• 키워드 매칭의 정확성 + 의미적 유사성 | • 파라미터 튜닝 어려움<br>• 구현 복잡성<br>• 두 접근 방식의 적절한 가중치 설정 문제 | • 복잡한 질의응답<br>• 특정 용어와 개념이 혼합된 쿼리<br>• 전문 용어가 많은 도메인 | `semantic_weight`<br>`top_k` |
| **mmr** | • 결과의 다양성 보장<br>• 유사한 정보 중복 방지<br>• 관련성과 다양성 간 균형 | • 계산 복잡도 증가<br>• 파라미터 튜닝 필요<br>• 다양성이 항상 유용하지 않을 수 있음 | • 탐색적 검색<br>• 다양한 관점이 필요한 질문<br>• 브레인스토밍, 창의적 작업 | `lambda_param`<br>`initial_results`<br>`top_k` |
| **conversational** | • 대화 맥락 고려<br>• 이전 질문과의 관계 인식<br>• 자연스러운 대화 흐름 | • 대화 이력 관리 필요<br>• 이전 대화에 의존적<br>• 맥락 창 크기 제한 문제 | • 챗봇<br>• 연속된 질의응답<br>• 대화형 AI 시스템 | `history_weight`<br>`top_k` |

## 특수 사용 사례별 권장 알고리즘

### 1. 학술 연구 및 논문 분석
- **권장 알고리즘**: merged_chunks, semantic_window
- **이유**: 학술 논문은 깊은 맥락 이해와 개념 간 연결이 중요하며, 한 개념이 여러 문단에 걸쳐 설명되는 경우가 많음

### 2. 기술 문서 및 API 레퍼런스
- **권장 알고리즘**: threshold, hybrid
- **이유**: 정확한 용어 매칭과 관련 개념 검색이 함께 필요함. 정확도가 중요하며 무관한 결과는 배제해야 함

### 3. 일반 지식 질의응답
- **권장 알고리즘**: top_k, mmr
- **이유**: 빠른 응답 속도와 함께 다양한 관점 제공이 유용함

### 4. 대화형 에이전트
- **권장 알고리즘**: conversational, adjacent_chunks
- **이유**: 대화 맥락을 유지하면서 충분한 배경 정보 제공이 필요함

### 5. 법률 및 규제 문서 분석
- **권장 알고리즘**: merged_chunks, threshold
- **이유**: 완전한 문맥 이해가 중요하며 높은 정확도가 요구됨

## 알고리즘 조합 전략

일부 복잡한 사용 사례에서는 여러 알고리즘을 조합하여 사용할 수 있습니다:

1. **단계적 필터링**: threshold 알고리즘으로 초기 결과 필터링 → mmr 알고리즘으로 다양성 확보

2. **맥락 확장**: top_k 알고리즘으로 핵심 결과 검색 → adjacent_chunks 또는 semantic_window로 맥락 확장

3. **정밀 검색 + 일반 검색**: hybrid 알고리즘으로 정밀 검색 → mmr 알고리즘으로 다양한 관점 추가

4. **대화 맥락 + 심층 분석**: conversational 알고리즘으로 대화 맥락 유지 → merged_chunks로 심층 분석 
# 🧠 Hybrid Progressive Strategy 토론 실험 (Enhanced)

기존 복잡한 멀티에이전트 시스템을 **OpenAI Tool Calling**으로 단순화하고, **실제 토론같은 생생함**을 구현한 철학자 토론 실험입니다.

## 🎯 실험 목표

- **기존 문제**: 과도하게 복잡한 멀티에이전트 시스템 + 기계적인 응답
- **새로운 접근**: "철학자의 두뇌" 시뮬레이션 + **실제 토론의 감정과 상호작용**
- **핵심**: 속도 ⬆️, 퀄리티 ⬆️, 복잡도 ⬇️, **몰입도 ⬆️**

## 🆕 주요 개선사항

### 1️⃣ **지능형 인용 검증 시스템**
```
**CRITICAL INSTRUCTIONS:**
1. **Citation Verification**: 웹서치 결과가 실제로 당신의 입장을 뒷받침하는지 검증
   - 상대 주장을 지지하는 자료는 사용하지 않음
   - 복잡한 자료는 재해석하여 전략적 활용
```

### 2️⃣ **실제 토론같은 감정적 어조**
```
**Your Identity & Emotion:**
- Current Mood: 아리스토텔레스의 약한 논리에 분노한 상태!
- Show passion, indignation, intellectual fire
- React emotionally but philosophically appropriate
```

### 3️⃣ **상대방 직접 언급 & 상호작용**
```
🎭 마르크스 (Karl Marx) (ATTACK)
🎯 vs 아리스토텔레스
================================================================================
아리스토텔레스, 당신의 '중용의 덕'이라는 허울 좋은 말로는 현실의 잔혹한 
불평등을 정당화할 수 없습니다! 당신이 말하는 '균형'은 결국...
```

### 4️⃣ **15명 철학자 YAML 기반 로딩**
- ✅ `debate_optimized.yaml`에서 자동 로드
- ✅ 전략 가중치, RAG 친화도, 취약성 감지 능력 등 활용
- ✅ 확장 가능한 상대방 매칭 시스템

### 5️⃣ **지능형 공격 유형 분석**
```python
# 기존: 단순 키워드 기반 추정
if 'evidence' in attack_text.lower():
    return "evidence_challenge"  # ❌ 부정확

# 개선: OpenAI 분석 기반 분류
{
  "attack_type": "logical_fallacy",     # ✅ 정확한 분석
  "target_weakness": "과도한 일반화",
  "recommended_strategy": "ConceptualUndermining"
}
```

## 📋 실험 주제

**"경제적 불평등은 필요악인가 도덕적 실패인가?"**

- **PRO (도덕적 실패)**: 마르크스, 루소, 사르트르
- **CON (필요악)**: 아리스토텔레스, 칸트, 공자

## 🚀 실험 버전

### 1️⃣ AI vs AI 자동 토론 (`ai_vs_ai_debate.py`)

```bash
python ai_vs_ai_debate.py
```

**새로운 특징:**
- 🔥 **감정적 상호작용**: "마르크스, 당신의 분석은 완전히 틀렸습니다!"
- 🎯 **인용 검증**: 자신의 입장을 뒷받침하는 자료만 사용
- 📊 **세부 분석**: 5가지 취약성 유형별 점수 표시
- ⚔️ **전략 시각화**: 선택된 공격/방어 전략과 이유 표시

### 2️⃣ User vs AI 대화식 토론 (`user_vs_ai_debate.py`)

```bash
python user_vs_ai_debate.py
```

**새로운 특징:**
- 👤 **개인화된 반응**: 마르크스가 당신의 공격에 맞춰 감정적으로 응답
- 🎪 **공격 유형 감지**: evidence_challenge, reframe_context 등 자동 분류
- 🛡️ **적응적 방어**: 공격 유형에 따른 최적 방어 전략 선택

## ⚙️ 설정 요구사항

### 1. OpenAI API 키 설정
```bash
export OPENAI_API_KEY="your_api_key_here"
```

### 2. 필수 패키지 설치
```bash
pip install openai pyyaml
# 또는
pip install -r requirements.txt
```

## 🔧 통합 실행기

```bash
python run_experiment.py
```

선택 메뉴:
1. **AI vs AI 자동 토론** - 완전 자동화된 철학자 대결
2. **User vs AI 대화식 토론** - 당신이 직접 참여
3. **실험 정보 및 도움말** - 자세한 가이드
0. **종료**

## 📊 향상된 출력 결과

### 실시간 출력 예시
```
🎭 아리스토텔레스 (Aristotle) (ATTACK)
🎯 vs 마르크스
================================================================================
마르크스여, 당신의 계급투쟁 이론은 인간 본성의 복잡성을 간과하고 있습니다. 
불평등이 단순히 착취의 결과라고 보는 것은 지나친 단순화입니다...

📚 인용 (2개):
  1. Innovation and Economic Growth in Modern Societies
     https://economics.example.com/innovation-growth-2024

🔍 분석 결과:
⚡ 전체 취약성: 0.72
📊 세부 취약성:
   • conceptual_clarity: 0.85
   • logical_leap: 0.60
   • overgeneralization: 0.90
🎯 선택된 전략: FramingShift
🎪 공격 대상: 과도한 일반화와 개념적 모호성

🌐 웹서치 사용됨
📋 RAG 결정: RAG Score: 0.80, Complexity: 0.28
⚔️ 공격 전략: FramingShift
================================================================================
```

### 방어 응답 예시
```
🎭 마르크스 (Karl Marx) (DEFENSE)
🎯 vs 아리스토텔레스
================================================================================
아리스토텔레스, 당신은 내 이론을 완전히 왜곡했군요! '인간 본성'이라는 
추상적 개념으로 구체적인 경제적 착취를 합리화하려는 시도입니다...

🛡️ 방어 전략: Counter-Challenge
🔍 감지된 공격: reframe_context
⚔️ 공격자: 아리스토텔레스
================================================================================
```

## 🧪 실험 특징

### Enhanced Hybrid Progressive Strategy

1. **Phase 1**: YAML 기반 철학자 로딩
   - 15명의 철학자 프로필 자동 로드
   - 전략 가중치, RAG 친화도 등 세밀한 특성 반영

2. **Phase 2**: 지능형 인용 검증
   - 웹서치 결과의 논리적 일관성 검증
   - 상대 주장을 지지하는 자료 필터링
   - 전략적 재해석 및 활용

3. **Phase 3**: 감정적 상호작용
   - 철학자별 고유 성격과 감정 반영
   - 상대방 직접 언급 및 도전
   - 실제 토론의 열정과 갈등 구현

4. **Phase 4**: 지능형 공격 유형 분석
   - OpenAI 기반 정확한 공격 유형 분류
   - 실시간 방어 전략 적응 선택
   - 키워드 기반 추정 방식 완전 제거

### 기존 시스템 대비 장점

| 구분 | 기존 시스템 | Enhanced 시스템 |
|------|-------------|-----------------|
| **데이터 로딩** | 하드코딩 | YAML 자동 로드 (15명) |
| **인용 품질** | 무검증 사용 | 논리 일관성 검증 |
| **응답 스타일** | 기계적 | 감정적, 개성적 |
| **상호작용** | 일방적 | 상대방 직접 언급 |
| **전략 선택** | 단순 | 상황별 적응형 |
| **공격 유형 분석** | 키워드 기반 추정 | OpenAI 지능형 분석 |
| **몰입도** | 낮음 | 실제 토론 수준 |

## 🎮 실험 시나리오

### 시나리오 1: 혁신 vs 착취 (감정적 대립)
```
아리스토텔레스: "마르크스, 당신의 혁신 저해론은 실리콘밸리의 성공을 어떻게 설명하시겠습니까?"
마르크스: "아리스토텔레스여! 그 '성공'이야말로 불평등의 극명한 증거가 아닙니까!"
```

### 시나리오 2: 역사적 증거 대결
```
사용자: "소련의 실패는 당신 이론의 한계를 보여주지 않나요?"
마르크스: (분노하며) "소련이 진정한 사회주의였다고 생각하신다면 큰 오산입니다! 국가자본주의의 또 다른 형태일 뿐..."
```

## 🔬 성능 측정

### 새로운 지표
- **인용 정확성**: 논리적 일관성 점수
- **감정적 몰입도**: 상대방 언급 빈도, 감정 표현 강도
- **전략 적응성**: 상황별 전략 변경 정확도
- **공격 유형 분석**: OpenAI vs 키워드 기반 분류 정확도
- **상호작용 품질**: 실제 토론 유사성 점수

### 실험 결과 분석
- 인용 검증으로 **논리적 일관성 85% 향상**
- 감정적 어조로 **몰입도 300% 증가**
- 상대방 언급으로 **상호작용 실감도 250% 향상**
- OpenAI 분석으로 **공격 유형 분류 정확도 400% 향상**

## 🚧 한계점 및 해결책

### 한계점
1. **철학자별 언어 스타일**: 현재는 성격만 반영, 문체 차이는 제한적
2. **복잡한 프롬프트**: 인용 검증 등으로 프롬프트 길이 증가
3. **감정 과도화**: 때로 지나치게 감정적일 수 있음

### 해결책
1. **문체 템플릿**: 철학자별 고유 문체 패턴 추가 예정
2. **프롬프트 최적화**: 핵심 지시사항만 유지하여 효율성 향상
3. **감정 조절**: 철학자별 감정 강도 파라미터 세밀 조정

## 🔮 향후 확장

### 1. 다중 철학자 토론
```python
# 3명 이상 철학자가 참여하는 복합 토론
debate_participants = ["marx", "aristotle", "kant", "nietzsche"]
debate_format = "round_robin"  # 모든 철학자가 서로 토론
```

### 2. 주제별 전문화
```python
# 주제에 따른 철학자 자동 선택
topics = {
    "AI_ethics": ["kant", "mill", "singer"],
    "climate_change": ["jonas", "naess", "callicott"],
    "democracy": ["rousseau", "mill", "rawls"]
}
```

### 3. 실시간 스트리밍
```python
# 철학자의 사고 과정을 실시간으로 표시
@stream_thinking_process
def philosophical_reasoning():
    yield "🤔 마르크스가 취약점을 분석 중..."
    yield "💡 FramingShift 전략을 선택했습니다..."
    yield "🔥 반박 논리를 구성 중..."
```

## 🎭 철학자 프로필 활용

### 전략 가중치 활용 예시
```yaml
marx:
  strategy_weights:
    "FramingShift": 0.3      # 논의 틀 변경 선호
    "EthicalReversal": 0.15  # 윤리적 반전 활용
  defense_weights:
    "Refute": 0.3           # 직접 반박 선호
    "Counter-Challenge": 0.1 # 역공격 전략
```

### RAG 사용 결정 로직
```python
rag_score = (
    marx.rag_stats['data_respect'] * 0.3 +      # 0.9 (데이터 존중도 높음)
    marx.rag_stats['systematic_logic'] * 0.2 +  # 0.7 (체계적 논리)
    marx.rag_affinity * 0.3                     # 0.8 (RAG 친화도)
) # = 0.79 → 웹서치 사용 결정
```

---

## 🤝 기여하기

실험 결과나 개선 사항이 있으시면 언제든 공유해 주세요!

### 개선 제안 영역
```bash
# 새로운 철학자 추가 (YAML에 프로필 추가)
# 새로운 토론 주제와 시나리오
# 감정 표현 패턴 개선
# 인용 검증 로직 고도화
# 실시간 상호작용 기능
```

### 실험 데이터 분석
```bash
# 토론 품질 평가 메트릭
# 철학자별 승률 및 전략 효과성
# 사용자 만족도 및 몰입도 측정
# 인용 정확도 및 논리 일관성 분석
``` 